# Создание системы ролей и разрешений

## Описание
Реализовать полноценную систему управления ролями и разрешениями (permissions) для пользователей платформы маркетплейса. Система должна поддерживать гибкое назначение ролей пользователям и управление доступом к различным функциям платформы.

## Список задач

- [x] Спроектировать структуру таблиц и отношений
- [x] Установить пакет spatie/laravel-permission
- [x] Опубликовать конфигурацию и миграции пакета
- [x] Запустить миграции для создания таблиц
- [x] Добавить трейт HasRoles в модель User
- [x] Создать сидер RolesAndPermissionsSeeder
- [x] Запустить сидер для создания базовых ролей и разрешений

## Архитектура

### Таблицы
1. **roles** - роли (Admin, Brand Owner, Customer, etc.)
2. **permissions** - разрешения (create-product, edit-brand, etc.)
3. **role_user** - связь пользователей и ролей (many-to-many)
4. **permission_role** - связь ролей и разрешений (many-to-many)

### Базовые роли
- **Admin** - полный доступ ко всей платформе
- **Brand Owner** - управление своими брендами и товарами
- **Customer** - покупатель (просмотр, заказы)
- **Moderator** - модерация контента

### Группы разрешений
- **Бренды**: view-brands, create-brand, edit-brand, delete-brand
- **Товары**: view-products, create-product, edit-product, delete-product
- **Категории**: manage-categories
- **Коллекции**: manage-collections
- **Пользователи**: manage-users, view-users
- **Опции**: manage-options

## Заметки
- Пользователь может иметь несколько ролей одновременно
- Разрешения назначаются ролям, а не напрямую пользователям
- Система должна быть расширяемой для добавления новых разрешений
- Использовать eager loading для оптимизации запросов
- Разрешения проверяются через middleware на маршрутах